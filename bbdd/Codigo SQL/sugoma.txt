#ID's AUTO_INCREMENT

- idAcciones
- idListas
- idEmpresa
- idImages
- idProducto
- idComentario

Todos estos campos pasaran a ser AutoIncrementativos [AUTO_INCREMENT] con la finalidad de autogenerar su id con cada registro.

#Tabla Usuarios

- A peticion, el apartado clave de la tabla usuarios, destinado a ser la contraseña de administradores, conserva el campo numerico INT con una limitacion de 4 caracteres.
[INT(4)]


#Tabla Comentario

- El campo Score de la tabla Comenartio pasa a ser de VARCHAR(45) a INT.
- El campo 'Comentario_idComentario' que hace referencia al comentario que se esta respondiendo al tratarse de una respuesta, pasa a llamarse 'idRespuesta_Comentario'.
- El campo 'Comentariocol' que hace referencia a la fecha de publicacion de un comentario pasa a llamarse 'PubCom' (Publicacion Comentario for short).

TRIGGERS

Triggers que actualicen la tabla acciones:

- Comentario:
AFTER INSERT

// ERRONEO:: INSERT INTO Acciones VALUE (DEFAULT,Usuario_Username+' a añadido un comentario',CURDATE(),Usuario_Username,null);

// CORREGIDO:
INSERT INTO acciones (action_id, accion, fecha, user_username, cif_company) 
VALUE (idComentario, 'Publicado nueva reseña', publication_date, comment_username, company_page);




BEFORE DELETE:
INSERT INTO Acciones VALUE (DEFAULT,Usuario_Username+' a borrado un comentario',CURDATE(),Usuario_Username,null);

- Usuario / Empresa:
AFTER INSERT:
INSERT INTO Acciones VALUES (DEFAULT,username+' se ha registrado',CURDATE(), username,NULL);
INSERT INTO Acciones VALUES (DEFAULT,Usuario_Username+' ha registrado '+emp_name,CURDATE(), Usuario_Username,emp_name);

AFTER UPDATE:
INSERT INTO Acciones VALUES (DEFAULT,username+' a actualizado su perfil.',CURDATE(), username,NULL);
INSERT INTO Acciones VALUES (DEFAULT,'Se a actualizado el perfil de '+emp_name+'.',CURDATE(), NULL,emp_name);

BEFORE DELETE:
INSERT INTO Acciones VALUE (DEFAULT,Username+' a borrado su cuenta',CURDATE(),Username,null);
INSERT INTO Acciones VALUE (DEFAULT,Usuario_Username+' a borrado '+emp_name+'.',CURDATE(),Usuario_Username,emp_name);

- Listas:

AFTER INSERT y BEFORE DELETE:
INSERT INTO Acciones VALUES (DEFAULT,Usuario_Username+' ha creado la lista '+Nombre,CURDATE(), Usuario_Username,NULL);
INSERT INTO Acciones VALUE (DEFAULT,Usuario_Username+' a borrado la lista '+Nombre+'.',CURDATE(),Usuario_Username,NULL);

AFTER UPDATE:
INSERT INTO Acciones VALUE (DEFAULT,Usuario_Username+' a modificado la lista '+Nombre+'.',CURDATE(),Usuario_Username,NULL);

- Productos:

AFTER INSERT y BEFORE DELETE:
INSERT INTO Acciones VALUES (DEFAULT,prod_name+' añadido a catalogo.',CURDATE(), NULL,NULL);
INSERT INTO Acciones VALUE (DEFAULT,prod_name+' eliminado de catalogo.',CURDATE(),NULL,NULL);


AFTER UPDATE:
INSERT INTO Acciones VALUE (DEFAULT,'La información de '+prod_name+' fue modificada.',CURDATE(),NULL,NULL);

Para calcular la puntuacion media en empresa:

*Se realizara un metodo en C# que gestione este campo y lance a la query un update con este dato cada vez que se actualice.
